TEHRAN, Iran — Born into a poor family in one of Tehran’s most desolate neighborhoods, at age 17 Safar Anghouti had little to look forward to beyond a lifetime in his father’s business — rummaging through trash on the streets of the city for bottles, cans and anything else of value.

But one thing could always be said of Safar Anghouti: he was talented with the knife. His friends said he could unfailingly hit a target at 30 feet. One day seven years ago he lost his temper, and in a flash his knife flew through the air, inflicting a mortal wound in the neck of a rival.

Mr. Anghouti was quickly tried and convicted, and this being Iran, where murder carries the death penalty even for minors, he found himself on death row in one of the country’s largest prisons.

For most Iranian convicts — more than 600 were executed last year — that would have been the end of the story, but not for Mr. Anghouti, who became the beneficiary of two evolving trends in Iranian society, a growing distaste for capital punishment and the spread of social media.

Under Iran’s Islamic justice system, convicted criminals — even murderers — can buy their freedom from the victim’s family. Thanks to an extraordinary social media campaign, Mr. Anghouti’s impoverished family was able to take the next step and raise the $50,000 demanded by the relatives of the victim. After escaping the noose three times with last-minute appeals, Mr. Anghouti, now 24, is due to be released any day, once bureaucratic loose ends are tied up.

“All these people, they felt the execution of someone who committed a mistake when he wasn’t even old enough to get a driver’s license was unjust,” said Mr. Anghouti’s sister, Zahra. “Instead of applauding revenge, they paid money to spare my brother’s life.”

Executions have been a primary form of punishment in Iran for decades, some of them public but most carried out behind prison walls. The United Nations estimates that Iran executed 500 to 625 convicts in 2013 — among them two juvenile offenders and 28 women — by far the most in the world after China.

Most of the sentences were handed down for drug smuggling and dealing, but executions were also carried out for murder, sodomy and “enmity against God,” a religious accusation open to a multitude of interpretations.

But in recent years attitudes have shifted, social activists say. Public hangings still attract hundreds of onlookers, but Iran’s enormous middle class is turning against capital punishment.

The issue of juveniles and Islamic law in Iran is especially complex, mainly because of conflicting interpretations of adulthood. According to the official Iranian interpretation of Islam, a girl is mature at the age of 9 and a boy is regarded as a man at 15. But the legal age for obtaining a driver’s license and owning property is 18, as is the threshold for men to fulfill Iran’s obligatory military service.

In 2012, the Guardian Council, which decides whether new laws are constitutional, approved an amended penal code for juvenile offenders that removes capital punishment for “discretionary crimes” like drug-related offenses. But individual judges can still hand down death sentences to juvenile offenders in other cases if they determine the child understood the nature and consequences of the crime. As of late 2012, Human Rights Watch reported last year, more than 100 juvenile offenders were on death row.

One of those was Mr. Anghouti, who had let his knife fly after seeing his victim, Mehdi Rezai, talking with a girl the young trash collector considered his. Seven years after the killing, the final date for his execution was set for Jan. 20.

With only a month to go, Mr. Anghouti’s family turned to the Imam Ali Popular Student’s Society, one of the few tolerated groups trying to prevent the executions of juvenile offenders. Since 2006, the group had managed to prevent 15 such executions.

The group’s work is based on a key principle in Iran’s interpretation of Islamic law that allows victims to seek retribution, avenging what has been done to them or their relatives — sometimes in eye-for-an-eye fashion — or to pardon offenders. In many cases, a pardon comes with cash compensation.

“We tell people that children are innocent,” said Zahra Rahimi, who runs the society with her husband, Sharmin Neymaninejad.

For the past year, she and other volunteers visited the family of Mr. Rezai, the victim. Sipping tea, sometimes taking along famous actors and other victims who had pardoned their attackers, they worked patiently to break down a wall of resistance and convince the relatives that it would be merciful and compassionate to allow Mr. Anghouti to live.

A week after the date was set for Mr. Anghouti’s hanging, the Rezai family, who declined to be interviewed for this article, finally relented and agreed to grant him a pardon in exchange for $50,000. That presented the problem of raising the money, since the Anghoutis are not a family of means. In the end, though, that proved to be the easy part. Within days, drawing in part on a campaign on Facebook — which is illegal in Iran but widely used with illegal software — the society raised 200 million tomans, about $13,000 more than was needed.

“We had to tell people to stop sending money,” said Mrs. Rahimi. “They all wanted to be a part of stopping this execution.”

Mr. Anghouti, who will be released soon, wrote a short note from prison to those who donated money. “I love you,” he wrote. “I promise to compensate what you did. I want to live a decent life.”

As part of the agreement, the entire Anghouti family moved out of the neighborhood.

“Had my brother been sentenced to life, no one would have cared for him,” said Mrs. Anghouti. “This is a new beginning.”

At the Imam Ali Society headquarters recently, attention had already shifted to a new case, involving Shahriar Mozafari, 28, who was about to be executed for a murder he committed 10 years ago.

This time, though, the victim’s family was unbending. “I’m preparing his family for his death,” Mr. Neymaninejad said of Mr. Mozafari.

Last week, he was declared dead by hanging, half an hour after the victim’s sister kicked a chair from under his feet.